(this["webpackJsonpe-shop"]=this["webpackJsonpe-shop"]||[]).push([[0],{20:function(t,e,c){},23:function(t,e,c){},36:function(t,e,c){},39:function(t,e,c){"use strict";c.r(e);var r=c(0),n=c.n(r),i=c(10),s=c.n(i),a=c(5),o=(c(36),c(6)),l=c(9),j=(c(23),c(15)),u=c.n(j),d=c(21),b=function(){var t=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("https://fakestoreapi.com/products/categories").then((function(t){if(!t.ok)throw t;return t.json()})).catch((function(t){throw t})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch("https://fakestoreapi.com/products").then((function(t){if(!t.ok)throw t;return t.json()})).catch((function(t){throw t})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=c(13),O=Object(h.b)({name:"products",initialState:{categories:[],products:[],activeCategory:""},reducers:{setCategories:function(t,e){t.categories=e.payload},setProducts:function(t,e){t.products=e.payload},setActiveCategory:function(t,e){t.activeCategory=e.payload}}}),p=O.actions,x=O,f=Object(h.b)({name:"cart",initialState:{isCartVisible:!1,items:[],totalAmount:0,totalPrice:0,changed:!1},reducers:{toggle:function(t){t.isCartVisible=!t.isCartVisible},addToCart:function(t,e){t.totalPrice+=e.payload.price,t.changed=!0,t.totalAmount++;var c=e.payload,r=t.items.find((function(t){return t.id===c.id})),n=(new Date).toLocaleTimeString(),i=(new Date).toLocaleDateString();r?(r.amount=r.amount+1,r.totalPrice=r.totalPrice+c.price,r.time=n,r.date=i):t.items.push({id:c.id,price:c.price,amount:1,totalPrice:c.price,title:c.title,time:n,date:i})},removeFromCart:function(t,e){var c=e.payload,r=c.id,n=c.price;t.totalPrice-=n,t.changed=!0,t.totalAmount--;var i=t.items.find((function(t){return t.id===r}));1===i.amount?t.items=t.items.filter((function(t){return t.id!==r})):(i.amount--,i.totalPrice=i.totalPrice-i.price)},getItemsFromLocalStorage:function(t,e){t.items=e.payload.items,t.totalPrice=e.payload.price},removeItemsFromLocalStorage:function(t){localStorage.removeItem("cart"),localStorage.removeItem("price"),t.items=[],t.totalPrice=0}}}),g=f.actions,v=f,C=c(3),N=c(1),y=function(){return Object(N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(N.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},S=function(){var t=Object(r.useState)(!1),e=Object(o.a)(t,2),c=e[0],n=e[1],i=Object(a.c)((function(t){return t.cart})),s=i.items.reduce((function(t,e){return t+e.amount}),0),l=i.items;Object(r.useEffect)((function(){if(0!==l.length){n(!0);var t=setTimeout((function(){n(!1)}),300);return function(){clearTimeout(t)}}}),[l]);var j="cart__button ".concat(c?"bump":"");return Object(N.jsxs)("button",{className:j,children:[Object(N.jsx)("span",{className:"icon",children:Object(N.jsx)(y,{})}),Object(N.jsx)("span",{children:"Your cart"}),Object(N.jsx)("span",{className:"badge",children:s})]})},w=function(t){var e=t.showCartHandler,c=Object(a.c)((function(t){return t.products})),r=Object(a.b)(),n=c.categories.map((function(t){return Object(N.jsx)("li",{onClick:function(){localStorage.setItem("activeCategory",t),r(p.setActiveCategory(t))},children:Object(N.jsxs)(l.b,{to:"/products",children:[" ",t]})},t)}));return Object(N.jsxs)("header",{className:"header",children:[Object(N.jsx)("h1",{children:"Shop App"}),Object(N.jsx)("nav",{children:Object(N.jsxs)("ul",{children:[Object(N.jsx)("li",{children:Object(N.jsx)(l.c,{to:"/home",children:"About us"})}),Object(N.jsxs)("li",{children:["Products",Object(N.jsx)("ul",{className:"productsList",children:n})]}),Object(N.jsx)("li",{children:Object(N.jsx)(l.c,{to:"/home",children:"Contact"})}),Object(N.jsx)("li",{onClick:e,children:Object(N.jsx)(S,{})})]})})]})},k=c.p+"static/media/bac2.a8de51a6.jpg",P=function(){return Object(N.jsxs)("div",{className:"home",children:[Object(N.jsx)("h1",{children:"Your online shop - check us!"}),Object(N.jsx)("img",{src:k,alt:"background home"})]})},I=function(t){var e=t.children,c=t.className;return Object(N.jsx)("div",{className:"card ".concat(c),children:e})},A=function(t){var e=t.src,c=t.title,r=t.price,n=t.description,i=t.id,s=Object(a.c)((function(t){return t.products}));return Object(N.jsx)(l.b,{to:"/products/".concat(s.activeCategory,"/").concat(i),state:{src:e,title:c,price:r,description:n,id:i},children:Object(N.jsxs)(I,{className:"product",children:[Object(N.jsx)("img",{src:e,alt:e}),Object(N.jsx)("h6",{children:c}),Object(N.jsxs)("p",{children:[r," $"]})]})})},_=function(){var t=Object(a.c)((function(t){return t.products})),e=Object(a.b)(),c=t.products.filter((function(e){return e.category.toUpperCase()===t.activeCategory.toUpperCase()}));Object(r.useEffect)((function(){var c=localStorage.getItem("activeCategory")||"";t.activeCategory||e(p.setActiveCategory(c))}),[t.activeCategory,e]);var n=c.map((function(t){return Object(N.jsx)(A,{id:t.id,src:t.image,title:t.title,price:t.price,description:t.description},t.id)}));return Object(N.jsxs)("div",{className:"products",children:[Object(N.jsx)("h1",{children:"Products"}),Object(N.jsx)("span",{className:"underline"}),Object(N.jsx)("div",{className:"wrapper",children:n})]})},F=function(){var t=Object(C.f)(),e=Object(C.g)(),c=Object(a.b)(),r=t.state,n=r.id,i=r.src,s=r.title,o=r.price,l=r.description;return Object(N.jsxs)("div",{className:"products",children:[Object(N.jsx)("h1",{children:s}),Object(N.jsx)("span",{className:"underline"}),Object(N.jsxs)(I,{className:"product__details",children:[Object(N.jsx)("div",{className:"image",children:Object(N.jsx)("img",{src:i,alt:"src"})}),Object(N.jsxs)("div",{className:"description",children:[Object(N.jsx)("h3",{children:s}),Object(N.jsx)("h6",{children:l}),Object(N.jsxs)("p",{children:["Price: ",o," $"]}),Object(N.jsxs)("div",{className:"actions",children:[Object(N.jsx)("button",{className:"button__cart",onClick:function(){return function(t,e,r){c(g.addToCart({id:t,price:e,title:r}))}(n,o,s)},children:"Add to Cart"}),Object(N.jsxs)("button",{className:"button__alt",onClick:function(){return e(-1)},children:["Back to Products"," "]})]})]})]})]})},T=(c(20),function(t){var e=t.onClose;return Object(N.jsx)("div",{className:"backdrop",onClick:e})}),E=function(t){var e=t.children;return Object(N.jsx)("div",{className:"content",children:e})},H=function(t){var e=t.onClose,c=t.children;return Object(N.jsxs)(r.Fragment,{children:[s.a.createPortal(Object(N.jsx)(T,{onClose:e}),document.getElementById("overlays")),s.a.createPortal(Object(N.jsx)(E,{children:c}),document.getElementById("overlays"))]})},L=function(t){var e=t.amount,c=t.id,r=t.price,n=t.title,i=t.time,s=t.date,o=Object(a.b)(),l="$".concat(r);return Object(N.jsxs)("li",{className:"cart__item",children:[Object(N.jsxs)("div",{children:[Object(N.jsx)("h4",{children:n}),Object(N.jsxs)("div",{className:"summary",children:[Object(N.jsx)("span",{className:"price",children:l}),Object(N.jsxs)("span",{className:"amount",children:["x ",e]})]}),Object(N.jsxs)("h6",{className:"time",children:["Time added: ",i]}),Object(N.jsxs)("h6",{className:"time",children:["Date added: ",s]})]}),Object(N.jsxs)("div",{className:"actions",children:[Object(N.jsx)("button",{onClick:function(){return function(t,e){o(g.removeFromCart({id:t,price:e}))}(c,r)},children:"\u2212"}),Object(N.jsx)("button",{onClick:function(){return function(t,e,c){o(g.addToCart({id:t,price:e,title:c}))}(c,r,n)},children:"+"})]})]})},J=function(t){var e=t.onClose,c=Object(a.c)((function(t){return t.cart})),n=Object(a.b)(),i=c.totalPrice.toFixed(2),s=Object(N.jsx)("ul",{className:"cart__items",children:c.items.map((function(t){return Object(N.jsx)(L,{id:t.id,title:t.title,amount:t.amount,price:t.price,time:t.time,date:t.date},t.id)}))}),o=Object(N.jsxs)(r.Fragment,{children:[s,Object(N.jsxs)("div",{className:"total",children:[Object(N.jsx)("span",{children:"Total order amount: "}),Object(N.jsx)("span",{children:Object(N.jsxs)("strong",{children:["$",i]})})]}),Object(N.jsxs)("div",{className:"actions",children:[Object(N.jsx)("button",{className:"order",onClick:function(){n(g.removeItemsFromLocalStorage())},children:"Order"}),Object(N.jsx)("button",{onClick:e,children:"Close"})]})]});return Object(N.jsx)(H,{onClose:e,children:o})},B=function(){var t=Object(r.useState)(!1),e=Object(o.a)(t,2),c=e[0],i=e[1],s=Object(a.c)((function(t){return t.cart.items})),l=Object(a.c)((function(t){return t.cart.totalPrice}));return Object(r.useEffect)((function(){localStorage.setItem("cart",JSON.stringify(s)),localStorage.setItem("price",JSON.stringify(l))}),[s,l]),Object(N.jsxs)(n.a.Fragment,{children:[c&&Object(N.jsx)(J,{onClose:function(){i(!1)}}),Object(N.jsxs)("div",{className:"App",children:[Object(N.jsx)("header",{children:Object(N.jsx)(w,{showCartHandler:function(){i(!0)}})}),Object(N.jsx)("main",{children:Object(N.jsxs)(C.d,{children:[Object(N.jsx)(C.b,{path:"/",element:Object(N.jsx)(P,{})}),Object(N.jsx)(C.b,{path:"home",element:Object(N.jsx)(P,{})}),Object(N.jsx)(C.b,{path:"products",element:Object(N.jsx)(_,{})}),Object(N.jsx)(C.b,{path:"products/:category/:productId",element:Object(N.jsx)(F,{})}),Object(N.jsx)(C.b,{path:"*",element:Object(N.jsx)(C.a,{to:"/home"})})]})})]})]})},D=c(46),$=function(){return Object(N.jsx)("div",{className:"loading",children:Object(N.jsx)(D.a,{})})},z=JSON.parse(localStorage.getItem("cart")||"[]"),M=JSON.parse(localStorage.getItem("price")||"");var V=function(){var t=Object(r.useState)(!1),e=Object(o.a)(t,2),c=e[0],n=e[1],i=Object(r.useState)(!1),s=Object(o.a)(i,2),j=s[0],u=s[1],d=Object(a.b)(),h=Object(a.c)((function(t){return t.products}));return Object(r.useEffect)((function(){d(g.getItemsFromLocalStorage({items:z,price:M})),n(!0),m().then((function(t){d(p.setProducts(t))})).catch((function(t){return u(t)})),b().then((function(t){d(p.setCategories(t)),n(!1)})).catch((function(t){return u(t)}))}),[d,h.products.length,h.categories.length]),Object(N.jsx)(l.a,{children:Object(N.jsxs)("div",{className:"App",children:[!c&&Object(N.jsx)(B,{}),c&&Object(N.jsx)($,{}),!c&&j&&Object(N.jsx)("div",{children:"Something went wrong!"})]})})},U=Object(h.a)({reducer:{cart:v.reducer,products:x.reducer}});s.a.render(Object(N.jsx)(a.a,{store:U,children:Object(N.jsx)(V,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.f1b4b487.chunk.js.map